{"version":3,"sources":["shared/components/dragdrop/dragdrop.component.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAAqE,eAAe,CAAC,CAAA;AAErF,iCAAgC,oBAAoB,CAAC,CAAA;AAGrD;IAIC,mCAAmB,EAAc,EAAS,OAAwB,EAAU,IAAuB;QAJpG,iBAkEC;QA9DmB,OAAE,GAAF,EAAE,CAAY;QAAS,YAAO,GAAP,OAAO,CAAiB;QAAU,SAAI,GAAJ,IAAI,CAAmB;QAClG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC;QAEnC,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,UAAU,EAAE,UAAC,CAAY;YACpD,KAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YAEpB,EAAE,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;gBACpB,CAAC,CAAC,YAAY,CAAC,UAAU,GAAG,MAAM,CAAC;YACpC,CAAC;YAED,MAAM,CAAC,KAAK,CAAC;QACd,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,MAAM,EAAE,UAAA,CAAC,IAAI,OAAA,KAAI,CAAC,OAAO,CAAC,CAAC,CAAC,EAAf,CAAe,CAAC,CAAC;QAE1D,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,WAAW,EAAE,UAAC,KAAgB;YACzD,EAAE,CAAC,CAAC,KAAK,CAAC,YAAY,IAAI,IAAI,CAAC,CAAC,CAAC;gBAC7B,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;gBAEvC,KAAK,CAAC,YAAY,CAAC,aAAa,GAAG,MAAM,CAAC;gBAQtC,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;YAIzC,CAAC;QACF,CAAC,CAAC,CAAA;IACH,CAAC;IAEO,+CAAW,GAAnB,UAAoB,KAAgB;QACnC,EAAE,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC;YAC1B,KAAK,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;IACF,CAAC;IAEO,2CAAO,GAAf,UAAgB,KAAgB;QAC/B,EAAE,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC;YAE1B,KAAK,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;QAED,EAAE,CAAC,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC,CAAC;YAE3B,KAAK,CAAC,eAAe,EAAE,CAAC;QACzB,CAAC;QAED,IAAI,CAAC,aAAa,EAAE,CAAC;IACtB,CAAC;IAGD,iDAAa,GAAb;QAAA,iBAKC;QAHG,UAAU,CAAC;YACP,KAAI,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;QAC9B,CAAC,EAAE,GAAG,CAAC,CAAC;IACZ,CAAC;IAlEF;QAAC,iBAAU,EAAE;;iCAAA;IAmEb,gCAAC;AAAD,CAlEA,AAkEC,IAAA;AAlEqB,iCAAyB,4BAkE9C,CAAA","file":"shared/components/dragdrop/dragdrop.component.js","sourcesContent":["import { Component, Injectable, ElementRef, ChangeDetectorRef } from '@angular/core';\n\nimport { DragDropService } from './dragdrop.service';\n\n@Injectable()\nexport abstract class DragDropAbstractComponent {\n\t_elem: HTMLElement;\n\t_defaultCursor: string;\n\n\tconstructor(public el: ElementRef, public service: DragDropService, private _cdr: ChangeDetectorRef) {\n\t\tthis._elem = this.el.nativeElement;\n\n\t\tthis._elem.addEventListener('dragover', (e: DragEvent) => {\n\t\t\tthis._onDragOver(e);\n\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = 'copy';\n\t\t\t}\n\n\t\t\treturn false;\n\t\t});\n\n\t\tthis._elem.addEventListener('drop', e => this._onDrop(e));\n\n\t\tthis._elem.addEventListener('dragstart', (event: DragEvent) => {\n\t\t\tif (event.dataTransfer != null) {\n\t\t\t    event.dataTransfer.setData('text', '');\n\t\t\t    // Change drag effect\n\t\t\t    event.dataTransfer.effectAllowed = 'copy';\n\t\t\t    // Change drag image\n\t\t\t    // if (this._config.dragImage != null) {\n\t\t\t    //     let dragImage: DragImage = this._config.dragImage;\n\t\t\t    //     (<any>event.dataTransfer).setDragImage(dragImage.imageElement, dragImage.x_offset, dragImage.y_offset);\n\t\t\t    // }\n\t\t\t    // Change drag cursor\n\t\t\t    //if (this._dragEnabled) {\n\t\t\t        this._elem.style.cursor = 'move';\n\t\t\t    // } else {\n\t\t\t    //     this._elem.style.cursor = this._defaultCursor;\n\t\t\t    // }\n\t\t\t}\n\t\t})\n\t}\n\n\tprivate _onDragOver(event: DragEvent): void {\n\t\tif (event.preventDefault) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\tprivate _onDrop(event: DragEvent): void {\n\t\tif (event.preventDefault) {\n\t\t\t// Necessary. Allows us to drop.\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tif (event.stopPropagation) {\n\t\t\t// Necessary. Allows us to drop.\n\t\t\tevent.stopPropagation();\n\t\t}\n\n\t\tthis.detectChanges();\n\t}\n\n\n\tdetectChanges() {\n\t    // Programmatically run change detection to fix issue in Safari\n\t    setTimeout(() => {\n\t        this._cdr.detectChanges();\n\t    }, 250);\n\t}\n}\n"],"sourceRoot":"/source/"}