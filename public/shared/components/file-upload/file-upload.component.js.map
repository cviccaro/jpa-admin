{"version":3,"sources":["shared/components/file-upload/file-upload.component.ts"],"names":[],"mappings":"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","file":"shared/components/file-upload/file-upload.component.js","sourcesContent":["import {\r\n    forwardRef,\r\n    Component,\r\n    OnInit,\r\n    AfterViewInit,\r\n    AfterContentInit,\r\n    SimpleChange,\r\n    OnChanges,\r\n    Input,\r\n    Output,\r\n    HostListener,\r\n    HostBinding,\r\n    EventEmitter,\r\n    ViewChild,\r\n    ViewChildren,\r\n    ContentChildren,\r\n    Provider,\r\n    QueryList,\r\n    ElementRef\r\n} from '@angular/core';\r\nimport { NgSwitch, NgSwitchCase, NgSwitchDefault } from '@angular/common';\r\nimport { NgModel, ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { Observable } from 'rxjs/Rx';\r\n\r\nimport { BooleanFieldValue } from '@angular2-material/core/annotations/field-value';\r\nimport { MD_GRID_LIST_DIRECTIVES, MdGridList } from '@angular2-material/grid-list';\r\nimport { MD_PROGRESS_BAR_DIRECTIVES } from '@angular2-material/progress-bar';\r\nimport { MD_ICON_DIRECTIVES } from '@angular2-material/icon';\r\n\r\nimport { DND_DIRECTIVES } from 'ng2-dnd/ng2-dnd';\r\n\r\nimport { GridImage } from './grid-image/index';\r\nimport { ManagedFile, ManagedImage } from '../../models/jp-file';\r\nimport { FileUploadToolbar } from './toolbar/index';\r\nimport { FileCardComponent } from './file-card/index';\r\nimport { FileIconComponent } from './file-icon/index';\r\n\r\nconst noop = () => { };\r\nlet nextUniqueId = 0;\r\n\r\nexport const IMAGE_UPLOAD_VALUE_ACCESSOR = new Provider(NG_VALUE_ACCESSOR, {\r\n    useExisting: forwardRef(() => FileUploadComponent),\r\n    multi: true\r\n});\r\n\r\n@Component({\r\n    moduleId: module.id,\r\n    selector: 'jpa-file-upload',\r\n    templateUrl: './file-upload.component.html',\r\n    styleUrls: ['./file-upload.component.css'],\r\n    directives: [\r\n        MD_GRID_LIST_DIRECTIVES,\r\n        MD_PROGRESS_BAR_DIRECTIVES,\r\n        MD_ICON_DIRECTIVES,\r\n        NgModel,\r\n        GridImage,\r\n        DND_DIRECTIVES,\r\n        FileUploadToolbar,\r\n        FileCardComponent,\r\n        FileIconComponent,\r\n        NgSwitch,\r\n        NgSwitchCase,\r\n        NgSwitchDefault\r\n    ],\r\n    providers: [IMAGE_UPLOAD_VALUE_ACCESSOR]\r\n})\r\nexport class FileUploadComponent implements ControlValueAccessor, OnInit, AfterViewInit {\r\n    public isDragOver: boolean = false;\r\n    public isLoading: boolean = false;\r\n    private _imagesLoaded: number = 0;\r\n    private _value: any;\r\n    private _rows: any[] = [];\r\n    private _cols: any[] = [];\r\n    private _dragging: boolean = false;\r\n    private _dragImage: any;\r\n    private _dropZoneStart: number;\r\n    private _droppedImage: any;\r\n    private _onTouchedCallback: () => void = noop;\r\n    private _onChangeCallback: (_: any) => void = noop;\r\n\r\n    public new_file: File;\r\n\r\n    /**\r\n     * Content directives\r\n     */\r\n    @ViewChildren(GridImage) private _gridImages: QueryList<GridImage>;\r\n    @ViewChild(MdGridList) private _gridList: MdGridList;\r\n\r\n    @ViewChild('currentImage') private _currentImageEl: ElementRef;\r\n\r\n    @HostBinding('class') get typeClass() {\r\n        return `file-upload-${this.type} file-upload-${this.multiple ? 'multiple' : 'single'}`;\r\n    }\r\n\r\n    public get empty() {\r\n        return this.value === undefined || this.value === null || Array.isArray(this.value) && this.value.length === 0 || Object.keys(this.value).length === 0;\r\n    }\r\n\r\n    /**\r\n     * Inputs\r\n     */\r\n    @Input() multiple: boolean = false;\r\n    @Input() type: string = 'file';\r\n    @Input() icon: string = 'panorama';\r\n    @Input() control: any;\r\n\r\n    @Input() name: string = null;\r\n    @Input() accept: string = '*';\r\n    @Input() @BooleanFieldValue() required: boolean = false;\r\n    @Input() id: string = `jpa-panel-${nextUniqueId++}`;\r\n    @Input() step: number = null;\r\n    @Input() tabIndex: number = null;\r\n\r\n    // MdGridList\r\n    @Input() gutterSize: string = \"8px\";\r\n    @Input() cols: number = 4;\r\n    @Input() rowHeight: any = '16:9';\r\n\r\n    /**\r\n     * Outputs\r\n     */\r\n    @Output() imageLoaded = new EventEmitter<ManagedImage>();\r\n    @Output() fileRemoved = new EventEmitter<ManagedFile|ManagedImage>();\r\n    @Output() fileAdded = new EventEmitter<ManagedFile|ManagedImage>();\r\n    @Output() change = new EventEmitter();\r\n\r\n    /** element  outputs **/\r\n    private _blurEmitter: EventEmitter<FocusEvent> = new EventEmitter<FocusEvent>();\r\n    private _focusEmitter: EventEmitter<FocusEvent> = new EventEmitter<FocusEvent>();\r\n\r\n    @Output('blur')\r\n    get onBlur(): Observable<FocusEvent> {\r\n        return this._blurEmitter.asObservable();\r\n    }\r\n\r\n    @Output('focus')\r\n    get onFocus(): Observable<FocusEvent> {\r\n        return this._focusEmitter.asObservable();\r\n    }\r\n\r\n    /** @internal */\r\n    handleFocus(event: FocusEvent) {\r\n        console.log('FileUploadComponent#handleFocus', event);\r\n    }\r\n\r\n    /** @internal */\r\n    handleBlur(event: FocusEvent) {\r\n        console.log('FileUploadComponent#handleBlur', event);\r\n    }\r\n\r\n    get value(): any { return this._value; };\r\n    @Input() set value(v: any) {\r\n        v = this.convertValueForInputType(v);\r\n\r\n        if (v !== this._value) {\r\n            this._value = v;\r\n\r\n            this.change.emit(v);\r\n\r\n            if (this.multiple) {\r\n                let ngModelValue = (Array.isArray(v) && v.length === 0) ? '' : v;\r\n                this._onChangeCallback(ngModelValue);\r\n            } else {\r\n                this._onChangeCallback(v);\r\n            }\r\n            this._onTouchedCallback();\r\n        }\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (this.type === 'image' && this.accept === '*') {\r\n            this.accept = 'image/jpeg, image/jpg, image/gif, image/png';\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (this.type === 'image' && !this.multiple) {\r\n            if (this._currentImageEl) {\r\n                 let imageEl = (<HTMLImageElement>this._currentImageEl.nativeElement);\r\n\r\n                 this.registerImageWatcher(imageEl);\r\n\r\n                 if (this.value.url) setTimeout(() => { imageEl.src = this._value.url; });\r\n            }\r\n        }\r\n    }\r\n\r\n    registerImageWatcher(imageEl: HTMLImageElement) {\r\n        imageEl.addEventListener('load', (event: Event) => {\r\n            let val = this.value;\r\n\r\n            val.width = imageEl.naturalWidth;\r\n            val.height = imageEl.naturalHeight;\r\n\r\n            this.value = val;\r\n\r\n            if (this.control) {\r\n                this.control.value = this.value;\r\n            }\r\n        });\r\n    }\r\n\r\n    registerOnChange(fn: any) {\r\n        this._onChangeCallback = fn;\r\n    }\r\n\r\n    registerOnTouched(fn: any) {\r\n        this._onTouchedCallback = fn;\r\n    }\r\n\r\n    /**\r\n     * ControlValueAccessor protocol\r\n     *\r\n     * Runs when value is first set\r\n     */\r\n    writeValue(value: any) {\r\n        this._value = this.convertValueForInputType(value);\r\n    }\r\n\r\n    /**\r\n     * Convert the value to the appropriate\r\n     * type based on properties multiple and type\r\n     *\r\n     * @param {any} value [description]\r\n     */\r\n    private convertValueForInputType(value: any): any {\r\n        if (!this.multiple) {\r\n            if ( !value ) return '';\r\n\r\n            return this.managedFile(this.type, value);\r\n        } else {\r\n            if ( !value ) return [];\r\n\r\n            return value.map((item, i) => this.managedFile(this.type, item, i));\r\n        }\r\n    }\r\n\r\n    private managedFile(type: string, value: any, idx: number = 0) {\r\n        switch(type) {\r\n            case 'image': if (!(value instanceof ManagedImage)) return new ManagedImage(value, idx);\r\n            case 'file': if (!(value instanceof ManagedFile)) return new ManagedFile(value, idx);\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    private _stopEvent(e: Event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n    }\r\n\r\n    private _getTransfer(event: any): any {\r\n        return event.dataTransfer ? event.dataTransfer : event.originalEvent.dataTransfer;\r\n    }\r\n\r\n    private _haveFiles(types: any): any {\r\n        if (!types) {\r\n            return false;\r\n        }\r\n\r\n        if (types.indexOf) {\r\n            return types.indexOf('Files') !== -1;\r\n        } else if (types.contains) {\r\n            return types.contains('Files');\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    gridImageLoaded(e: any) {\r\n        e._hasNew = false;\r\n\r\n        if (!e.config.hasOwnProperty('id')) {\r\n            this.isLoading = false;\r\n\r\n            e._hasNew = true;\r\n        } else if (++this._imagesLoaded === this.value.length) {\r\n            this.isLoading = false;\r\n        }\r\n\r\n        this.imageLoaded.emit(e);\r\n    }\r\n\r\n    handleClickedRemove(e: any) {\r\n        let value = this.value.slice(0);\r\n        value.splice(e.index, 1);\r\n        this.value = value;\r\n\r\n        this.fileRemoved.emit(e);\r\n    }\r\n\r\n    onDragOver(e: any) {\r\n        if (this._dragging) {\r\n            this._stopEvent(e);\r\n            return;\r\n        }\r\n\r\n        let transfer = this._getTransfer(e);\r\n        if (!this._haveFiles(transfer.types)) {\r\n            return;\r\n        }\r\n\r\n        transfer.dropEffect = 'copy';\r\n\r\n        this._stopEvent(e);\r\n        this.isDragOver = true;\r\n    }\r\n\r\n    onDragLeave(e: any) {\r\n        if (this._dragging) {\r\n            return;\r\n        }\r\n\r\n        this._stopEvent(e);\r\n        this.isDragOver = false;\r\n    }\r\n\r\n    fileDragStart(e: any): void {\r\n        this._dragging = true;\r\n    }\r\n\r\n    onDragEnd(e: any) {\r\n        this._stopEvent(e);\r\n        this._dragging = false;\r\n    }\r\n\r\n    add(event: Event) {\r\n        if (this._dragging) {\r\n            this._dragging = false;\r\n            this.isDragOver = false;\r\n\r\n            return;\r\n        }\r\n\r\n        let files = event.target['files'] || event['dataTransfer']['files'];\r\n\r\n        this._stopEvent(event);\r\n        this.isDragOver = false;\r\n\r\n        this.readFiles(files);\r\n    }\r\n\r\n    readFiles(files: any[] = []) {\r\n        if (!files.length) {\r\n            return;\r\n        }\r\n\r\n        this.isLoading = true;\r\n        for (let i = 0; i < files.length; i++) {\r\n            let file = files[i];\r\n\r\n            switch(this.type) {\r\n                case 'image':\r\n                    let managedImage = new ManagedImage({_file: file}, i);\r\n\r\n                    managedImage.read().subscribe(e => {\r\n                        managedImage.url = e;\r\n\r\n                        this.addToGrid(managedImage);\r\n\r\n                        this.isLoading = false;\r\n                    });\r\n\r\n                    break;\r\n                default:\r\n                    let managedFile = new ManagedFile({_file: file}, i);\r\n\r\n                    this.addToGrid(managedFile);\r\n\r\n                    this.isLoading = false;\r\n                    break;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    addToGrid(file: ManagedFile|ManagedImage) {\r\n        this.pushValue(file);\r\n        this.fileAdded.emit(file);\r\n    }\r\n\r\n    pushValue(file: ManagedFile|ManagedImage) {\r\n        let value = this.value.slice(0);\r\n\r\n        value.push(file);\r\n\r\n        this.value = value;\r\n    }\r\n\r\n    reorder(event: { dragData: number, mouseEvent: DragEvent }, new_index: number): void {\r\n        let old_index = event.dragData;\r\n\r\n        this._stopEvent(event.mouseEvent);\r\n        this._dragging = false;\r\n\r\n        if (old_index !== new_index) {\r\n            this.moveFile(old_index, new_index);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Move file within array\r\n     */\r\n    moveFile(old_index, new_index): void {\r\n        let files = this.value;\r\n\r\n        const source = files[old_index];\r\n        const target = files[new_index];\r\n\r\n        files[new_index] = source;\r\n        files[old_index] = target;\r\n\r\n        this.value = files;\r\n    };\r\n\r\n    /**\r\n     * Form reset\r\n     */\r\n    reset() {\r\n        console.log('FileUploadComponent.reset()', this);\r\n    }\r\n\r\n    /**\r\n     * Attach a single file\r\n     */\r\n    handleSingleFileAttach(e) {\r\n        this._stopEvent(e);\r\n\r\n        let file: File;\r\n\r\n        if (e instanceof File) {\r\n            file = e;\r\n        } else {\r\n            let files = e.target.files || e.dataTransfer.files;\r\n            file = files[0];\r\n        }\r\n\r\n        switch(this.type) {\r\n            case 'image':\r\n                this.attachSingleImage(file);\r\n                break;\r\n            case 'file':\r\n                this.attachSingleFile(file);\r\n                break;\r\n\r\n        }\r\n    }\r\n\r\n    attachSingleFile(file: File) {\r\n        let managedFile = new ManagedFile({_file: file}, 0);\r\n\r\n        this.value = managedFile;\r\n    }\r\n\r\n    attachSingleImage(file: File) {\r\n        let image = new ManagedImage({_file: file}, 0);\r\n\r\n        this.isLoading = true;\r\n\r\n        image.read().subscribe(e => {\r\n            image.url = e;\r\n\r\n            this.value = image;\r\n\r\n            let imageEl = (<HTMLImageElement>this._currentImageEl.nativeElement);\r\n            imageEl.src = e;\r\n\r\n            this.isLoading = false;\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Remove single file\r\n     */\r\n    removeFile(e: any) {\r\n        this.value = '';\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}