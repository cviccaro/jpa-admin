{"version":3,"sources":["shared/components/panel2/form/control.ts"],"names":[],"mappings":";AAkBA;IAkBI,0BAAY,MAA8B;QAZ1C,aAAQ,GAAY,KAAK,CAAC;QAatB,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;YAEhB,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAC,MAAM,CAAC,IAAI,CAAC,MAAM,GAAC,CAAC,CAAC,CAAC;YAClG,MAAM,CAAC,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC;QACtC,CAAC;QAED,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,IAAI,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC;QAE5D,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,KAAK,KAAK,CAAC,CAAC,CAAC;YAC5B,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,IAAI,cAAc,CAAC;QACxD,CAAC;QAED,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;IAChC,CAAC;IAlBD,sBAAI,mCAAK;aAAT;YACI,MAAM,CAAC,IAAI,CAAC,KAAK,KAAK,SAAS,CAAC;QACpC,CAAC;;;OAAA;IAkBD,kCAAO,GAAP,UAAQ,aAAsB;QAC1B,EAAE,CAAC,CAAC,aAAa,IAAI,IAAI,CAAC,KAAK,CAAC;YAAC,MAAM,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC;QAErF,MAAM,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;IAC7C,CAAC;IAYD,6CAAkB,GAAlB,UAAmB,MAA+B;QAAlD,iBAyBC;QAxBG,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YAClB,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,UAAC,SAAoC;gBACzD,IAAI,MAAM,GAAO,KAAK,CAAC;gBAEvB,MAAM,CAAC,OAAO,CAAC,UAAC,KAA4B;oBACxC,EAAE,CAAC,CAAC,KAAK,CAAC,IAAI,KAAK,SAAS,CAAC,MAAM,CAAC;wBAAC,MAAM,GAAG,KAAK,CAAC;gBACxD,CAAC,CAAC,CAAC;gBAEH,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;oBACT,IAAI,MAAM,GAAG,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,KAAI,EAAE,CAAC,KAAI,EAAE,MAAM,CAAC,CAAC,CAAC;oBAE7D,MAAM,CAAA,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;wBACtB,KAAK,QAAQ;4BACT,KAAI,CAAC,MAAM,GAAG,MAAM,CAAC;4BACrB,KAAK,CAAC;wBACV,KAAK,UAAU;4BACX,KAAI,CAAC,QAAQ,GAAG,MAAM,CAAC;4BACvB,KAAK,CAAC;oBACd,CAAC;gBACL,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACJ,OAAO,CAAC,IAAI,CAAC,uBAAoB,SAAS,CAAC,MAAM,+DAAyD,KAAI,CAAC,IAAM,CAAC,CAAC;gBAC3H,CAAC;YACL,CAAC,CAAC,CAAC;QACP,CAAC;IACL,CAAC;IACL,uBAAC;AAAD,CA5EA,AA4EC,IAAA;AA5EY,wBAAgB,mBA4E5B,CAAA","file":"shared/components/panel2/form/control.js","sourcesContent":["export interface PanelFormControlCondition {\n    target: string;\n    condition: (source: PanelFormControl<any>, target: PanelFormControl<any>) => boolean;\n    action: string;\n}\n\nexport interface PanelFormControlConfig {\n    name: string;\n    required?: boolean;\n    order?: number;\n    label?: string;\n    placeholder?: string;\n    editText?: string;\n    editIcon?: string|boolean;\n    hidden?: boolean;\n    conditions?: PanelFormControlCondition[];\n}\n\nexport class PanelFormControl<T> {\n    value: T;\n    controlType: string;\n    hidden: boolean;\n\n    name: string;\n    required: boolean = false;\n    order: number;\n    label: string;\n    placeholder: string;\n    editIcon: string|boolean;\n    editText: string;\n    conditions: PanelFormControlCondition[];\n\n    get empty(): boolean {\n        return this.value === undefined;\n    }\n\n    constructor(config: PanelFormControlConfig) {\n        if (!config.label) {\n            // @todo: drop label property?\n            config.label = config.name.substr(0,1).toUpperCase() + config.name.substr(1,config.name.length-1);\n            config.placeholder = config.label;\n        }\n\n        config.editText = config.editText || 'Edit ' + config.label;\n\n        if (config.editIcon !== false) {\n            config.editIcon = config.editIcon || 'help_outline';\n        }\n\n        Object.assign(this, config);\n    }\n\n    summary(panelExpanded: boolean): { text: any, icon: string|boolean } {\n        if (panelExpanded || this.empty) return { text: this.editText, icon: this.editIcon };\n\n        return { text: this.value, icon: false };\n    }\n\n    // summary(panelExpanded: boolean): Observable<{ text: any, icon: string|boolean }> {\n    //     return Observable.create(observer => {\n    //         if (panelExpanded || this.empty) {\n    //             observer.next({ text: this.editText, icon: this.editIcon });\n    //         } else {\n    //             observer.next({ text: this.value, icon: false });\n    //         }\n    //     });\n    // }\n\n    evaluateConditions(inputs: PanelFormControl<any>[]) {\n        if (this.conditions) {\n            this.conditions.forEach((condition: PanelFormControlCondition) => {\n                let target:any = false;\n\n                inputs.forEach((input: PanelFormControl<any>) => {\n                    if (input.name === condition.target) target = input;\n                });\n\n                if (target) {\n                    let result = condition.condition.apply(this, [this, target]);\n\n                    switch(condition.action) {\n                        case 'hidden':\n                            this.hidden = result;\n                            break;\n                        case 'required':\n                            this.required = result;\n                            break;\n                    }\n                } else {\n                    console.warn(`No target field \"${condition.target}\" was found while checking condition for source field ${this.name}`);\n                }\n            });\n        }\n    }\n}\n"],"sourceRoot":"/source/"}