{"version":3,"sources":["shared/components/panel2/form/control.ts"],"names":[],"mappings":"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","file":"shared/components/panel2/form/control.js","sourcesContent":["export interface PanelFormControlCondition {\n    target: string;\n    condition: (source: PanelFormControl<any>, target: PanelFormControl<any>) => boolean;\n    action: string;\n}\n\nexport interface PanelFormControlConfig {\n    name: string;\n    required?: boolean;\n    order?: number;\n    label?: string;\n    placeholder?: string;\n    editText?: string;\n    emptyText?: string;\n    editIcon?: string|boolean;\n    hidden?: boolean;\n    conditions?: PanelFormControlCondition[];\n}\n\nexport class PanelFormControl<T> {\n    value: T;\n    controlType: string;\n    hidden: boolean;\n\n    name: string;\n    required: boolean = false;\n    order: number;\n    label: string;\n    placeholder: string;\n    editIcon: string|boolean;\n    editText: string;\n    emptyText: string;\n    conditions: PanelFormControlCondition[];\n\n    get empty(): boolean {\n        if (typeof this.value === 'undefined') return true;\n\n        return this.value === undefined || this.value === null;\n    }\n\n    get editableText(): string {\n        if (this.empty) return this.emptyText;\n\n        return this.editText;\n    }\n\n    constructor(config: PanelFormControlConfig) {\n        if (!config.label) {\n            config.label = config.name.substr(0,1).toUpperCase() + config.name.substr(1,config.name.length-1);\n        }\n\n        config.placeholder = config.placeholder || config.label;\n\n        config.editText = config.editText || 'Edit ' + config.label;\n        config.emptyText = config.emptyText || 'Add ' + config.label;\n\n        if (config.editIcon !== false) {\n            config.editIcon = config.editIcon || 'help_outline';\n        }\n\n        Object.assign(this, config);\n    }\n\n    //@todo: make observable so can use distinctuntilchanged\n    summary(panelExpanded: boolean): { text: any, icon: string|boolean } {\n        if (panelExpanded || this.empty) return { text: this.editableText, icon: this.editIcon };\n\n        return { text: this.value, icon: false };\n    }\n\n    evaluateConditions(inputs: PanelFormControl<any>[]) {\n        if (this.conditions) {\n            this.conditions.forEach((condition: PanelFormControlCondition) => {\n                let target:any = false;\n\n                inputs.forEach((input: PanelFormControl<any>) => {\n                    if (input.name === condition.target) target = input;\n                });\n\n                if (target) {\n                    let result = condition.condition.apply(this, [this, target]);\n\n                    switch(condition.action) {\n                        case 'hidden':\n                            this.hidden = result;\n                            break;\n                        case 'required':\n                            this.required = result;\n                            break;\n                    }\n                }\n            });\n        }\n    }\n}\n"],"sourceRoot":"/source/"}