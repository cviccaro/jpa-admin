{"version":3,"sources":["shared/components/modal/modal.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAAiF,eAAe,CAAC,CAAA;AACjG,kCAAqC,8BAA8B,CAAC,CAAA;AACpE,uBAAwD,iBAAiB,CAAC,CAAA;AAC1E,mBAA2B,SAAS,CAAC,CAAA;AACrC,gCAAqE,mBAAmB,CAAC,CAAA;AASzF;IAAA;QACY,mBAAc,GAA8B,IAAI,mBAAY,EAAe,CAAC;QAE5E,WAAM,GAAiC,EAAE,CAAC;IA0CtD,CAAC;IAtCqB,sBAAI,oCAAQ;aAAZ;YACd,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,YAAY,EAAE,CAAC;QAC9C,CAAC;;;OAAA;IAED,+BAAM,GAAN,UAAO,IAAI,EAAE,MAAM,EAAE,KAAK;QACtB,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,KAAK,CAAC,eAAe,EAAE,CAAC;QAExB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;IAC3E,CAAC;IAED,wCAAe,GAAf;QACI,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;IACnF,CAAC;IAED,qCAAY,GAAZ,UAAa,GAAmB,EAAE,CAAQ;QACtC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC;YACtB,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QAClC,CAAC;QAED,IAAI,MAAM,GAAqB,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;QAElD,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,UAAA,GAAG,IAAuB,GAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7F,CAAC;IAED,oCAAW,GAAX,UAAY,OAAsB;QAC9B,EAAE,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACnC,IAAI,YAAY,GAAgB,OAAO,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC;YAE/D,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;gBACf,MAAM,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC;oBACxB,KAAK,MAAM;wBACP,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,UAAA,KAAK,IAAI,OAAA,IAAI,gCAAc,CAAC,KAAK,CAAC,EAAzB,CAAyB,CAAC,CAAC;wBAChF,KAAK,CAAC;gBACd,CAAC;YACL,CAAC;QACL,CAAC;IACL,CAAC;IAvCD;QAAC,YAAK,EAAE;;kDAAA;IAER;QAAC,aAAM,CAAC,QAAQ,CAAC;;kDAAA;IAdrB;QAAC,gBAAS,CAAC;YACP,QAAQ,EAAE,MAAM,CAAC,EAAE;YACnB,QAAQ,EAAE,WAAW;YACrB,WAAW,EAAE,cAAc;YAC3B,SAAS,EAAE,CAAC,aAAa,CAAC;YAC1B,UAAU,EAAE,CAAC,uCAAmB,EAAE,iBAAQ,EAAE,qBAAY,EAAE,wBAAe,CAAC;SAC7E,CAAC;;sBAAA;IA8CF,qBAAC;AAAD,CA7CA,AA6CC,IAAA;AA7CY,sBAAc,iBA6C1B,CAAA","file":"shared/components/modal/modal.js","sourcesContent":["import { Component, Input, Output, EventEmitter, SimpleChanges, OnChanges } from '@angular/core';\r\nimport { MATERIAL_DIRECTIVES }  from '../../libs/angular2-material';\r\nimport { NgSwitch, NgSwitchCase, NgSwitchDefault } from '@angular/common';\r\nimport { Observable } from 'rxjs/Rx';\r\nimport { ModalConfig, ModalInput, ModalFormField, ModalAction } from './modal.interface';\r\n\r\n@Component({\r\n    moduleId: module.id,\r\n    selector: 'jpa-modal',\r\n    templateUrl: './modal.html',\r\n    styleUrls: ['./modal.css'],\r\n    directives: [MATERIAL_DIRECTIVES, NgSwitch, NgSwitchCase, NgSwitchDefault]\r\n})\r\nexport class ModalComponent implements OnChanges {\r\n    private _actionEmitter: EventEmitter<ModalAction> = new EventEmitter<ModalAction>();\r\n\r\n    private _files: { [key: string] : FileList } = {};\r\n\r\n    @Input() config: ModalConfig;\r\n\r\n    @Output('action') get onAction(): Observable<ModalAction> {\r\n        return this._actionEmitter.asObservable();\r\n    }\r\n\r\n    action(type, config, event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n\r\n        this._actionEmitter.emit({ type: type, config: config, event: event });\r\n    }\r\n\r\n    modalFormSubmit() {\r\n        this._actionEmitter.emit({ type: 'submit', config: this.config, event: null });\r\n    }\r\n\r\n    handleChange(col: ModalFormField, e: Event) {\r\n        if (col.type === 'file') {\r\n            col.value = e.target['files'];\r\n        }\r\n\r\n        let inputs = <ModalFormField[]>this.config.inputs;\r\n\r\n        this.config.inputs.forEach(col => { (<ModalFormField>col).evaluateConditions(inputs); });\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.hasOwnProperty('config')) {\r\n            let currentValue: ModalConfig = changes['config'].currentValue;\r\n\r\n            if (currentValue) {\r\n                switch (currentValue.mode) {\r\n                    case \"form\":\r\n                        this.config.inputs = this.config.inputs.map(input => new ModalFormField(input));\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}