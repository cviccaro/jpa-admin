{"version":3,"sources":["shared/components/image-upload/image-upload.component.ts"],"names":[],"mappings":"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","file":"shared/components/image-upload/image-upload.component.js","sourcesContent":["import {\n    forwardRef,\n    Component,\n    AfterViewInit,\n    AfterContentInit,\n    SimpleChange,\n    OnChanges,\n    Input,\n    Output,\n    HostListener,\n    HostBinding,\n    EventEmitter,\n    ViewChild,\n    ViewChildren,\n    ContentChildren,\n    Provider,\n    QueryList,\n    ElementRef\n} from '@angular/core';\nimport { NgSwitch, NgSwitchCase, NgSwitchDefault } from '@angular/common';\nimport { NgModel, ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Observable } from 'rxjs/Rx';\n\nimport { BooleanFieldValue } from '@angular2-material/core/annotations/field-value';\nimport { MD_GRID_LIST_DIRECTIVES, MdGridList } from '@angular2-material/grid-list';\nimport { MD_PROGRESS_BAR_DIRECTIVES } from '@angular2-material/progress-bar';\nimport { MD_ICON_DIRECTIVES } from '@angular2-material/icon';\n\nimport { DND_DIRECTIVES } from 'ng2-dnd/ng2-dnd';\n\nimport { GridImage, ImageUpload } from './grid-image/index';\nimport { JpFile, ManagedFile, ManagedImage } from '../../models/jp-file';\nimport { FileUploadToolbar } from './toolbar/index';\nimport { FileIconComponent } from './file-icon/index';\nimport { AuthService } from '../../services/auth.service';\n\nconst noop = () => { };\nlet nextUniqueId = 0;\n\nexport const IMAGE_UPLOAD_VALUE_ACCESSOR = new Provider(NG_VALUE_ACCESSOR, {\n    useExisting: forwardRef(() => ImageUploadComponent),\n    multi: true\n});\n\n@Component({\n    moduleId: module.id,\n    selector: 'jpa-image-upload',\n    templateUrl: './image-upload.component.html',\n    styleUrls: ['./image-upload.component.css'],\n    directives: [\n        MD_GRID_LIST_DIRECTIVES,\n        MD_PROGRESS_BAR_DIRECTIVES,\n        MD_ICON_DIRECTIVES,\n        NgModel,\n        GridImage,\n        DND_DIRECTIVES,\n        FileUploadToolbar,\n        FileIconComponent,\n        NgSwitch,\n        NgSwitchCase,\n        NgSwitchDefault\n    ],\n    providers: [IMAGE_UPLOAD_VALUE_ACCESSOR]\n})\nexport class ImageUploadComponent implements ControlValueAccessor, AfterViewInit {\n    constructor(authService: AuthService) { }\n\n    public isDragOver: boolean = false;\n    public isLoading: boolean = false;\n    private _imagesLoaded: number = 0;\n    private _value: any = [];\n    private _rows: any[] = [];\n    private _cols: any[] = [];\n    private _dragging: boolean = false;\n    private _dragImage: any;\n    private _dropZoneStart: number;\n    private _droppedImage: any;\n    private _onTouchedCallback: () => void = noop;\n    private _onChangeCallback: (_: any) => void = noop;\n\n    public new_file: File;\n\n    /**\n     * Content directives\n     */\n    @ViewChildren(GridImage) private _gridImages: QueryList<GridImage>;\n    @ViewChild(MdGridList) private _gridList: MdGridList;\n\n    @ViewChild('currentImage') private _currentImageEl: ElementRef;\n\n    @HostBinding('class') get typeClass() {\n        return `file-upload-${this.type} file-upload-${this.multiple ? 'multiple' : 'single'}`;\n    }\n\n    public get empty() {\n        return this.value === undefined || this.value === null || Array.isArray(this.value) && this.value.length === 0 || Object.keys(this.value).length === 0;\n    }\n\n    /**\n     * Inputs\n     */\n    @Input() multiple: boolean = false;\n    @Input() images: any[] = [];\n\n    @Input() type: string = 'file';\n    @Input() icon: string = 'panorama';\n    \n    // MdGridList\n    @Input() gutterSize: string = \"8px\";\n    @Input() cols: number = 4;\n    @Input() rowHeight: any = '16:9';\n\n    // form-related\n    @Input() name: string = null;\n    @Input() @BooleanFieldValue() required: boolean = false;\n    @Input() id: string = `jpa-panel-${nextUniqueId++}`;\n    @Input() step: number = null;\n    @Input() tabIndex: number = null;\n\n    @Input() accept: string = '*';\n\n    /**\n     * Outputs\n     */\n    @Output() fileAdded: EventEmitter<File[]> = new EventEmitter<File[]>();\n    @Output() imageLoaded = new EventEmitter();\n    @Output() imageAdded = new EventEmitter();\n    @Output() imageRemoved = new EventEmitter();\n    @Output() change = new EventEmitter();\n\n    /** element  outputs **/\n    private _blurEmitter: EventEmitter<FocusEvent> = new EventEmitter<FocusEvent>();\n    private _focusEmitter: EventEmitter<FocusEvent> = new EventEmitter<FocusEvent>();\n\n    @Output('blur')\n    get onBlur(): Observable<FocusEvent> {\n        return this._blurEmitter.asObservable();\n    }\n\n    @Output('focus')\n    get onFocus(): Observable<FocusEvent> {\n        return this._focusEmitter.asObservable();\n    }\n\n    /** @internal */\n    handleFocus(event: FocusEvent) {\n        console.log('ImageUploadComponent#handleFocus', event);\n    }\n\n    /** @internal */\n    handleBlur(event: FocusEvent) {\n        console.log('ImageUploadComponent#handleBlur', event);\n    }\n\n    get value(): any { return this._value; };\n    @Input() set value(v: any) {\n        console.debug('ImageUploadComponent# set value(): ', {\n            v: v,\n            _value: this._value\n        });\n\n        if (v !== this._value) {\n            this._value = v;\n\n            console.warn('emitting change', v);\n            this.change.emit(v);\n\n            if (this.multiple) {\n                let val = v.length === 0 ? '' : v;\n                this._onChangeCallback(val);\n            } else {\n                this._onChangeCallback(v);\n            }\n\n            this._onTouchedCallback();\n        } else {\n            console.debug('ImageUploadComponent# not emitting change events');\n        }\n    }\n\n    ngOnInit() {\n        if (this.type === 'image' && this.accept === '*') {\n            this.accept = 'image/jpeg, image/jpg, image/gif, image/png';\n        }\n    }\n\n    ngAfterViewInit() {\n        if (this.type === 'image' && !this.multiple) {\n            console.debug('ImageUploadComponent | image - single #ngAfterViewInit().  Subscribing to image load...', {\n                this: this,\n                imageEl: this._currentImageEl\n            });\n            if (this._currentImageEl) {\n                 let imageEl = (<HTMLImageElement>this._currentImageEl.nativeElement);\n                 this.imageLoad(imageEl);\n            }\n        }\n    }\n\n    imageLoad(imageEl: HTMLImageElement) {\n        console.warn('ImageUploadComponent. imageLoad()');\n        imageEl.addEventListener('load', (event: Event) => {\n            console.debug('ImageUploadComponent.imageLoad() ....  Image loaded!', event);\n            let val: ManagedImage = this.value;\n\n            val.width = imageEl.naturalWidth;\n            val.height = imageEl.naturalHeight;\n            \n            // this.change.emit(val);\n\n            this.value = val;\n\n            // this.imageLoaded.emit({ event: event, config: this.value });\n            this.change.emit(this.value);\n        });\n        setTimeout(() => { imageEl.src = this._value.url; });\n    }\n\n    /**\n     * ControlValueAccessor protocol\n     *\n     * Runs when value is first set\n     */\n    writeValue(value: any) {\n        let m = this.multiple ? 'multiple' : 'single';\n        console.debug('ImageUpload --- ' + m + ' -- #writeValue: ', { value: value });\n        if (!this.multiple) {\n            switch (this.type) {\n                case 'image':\n                    if (value) {\n                        this._value = new ManagedImage(value, 0);\n\n                        // let imageEl = (<HTMLImageElement>this._currentImageEl.nativeElement);\n\n                        // this._value.watchForDimensions(imageEl);\n                        setTimeout(() => {\n                            if (this._currentImageEl) {\n                                 let imageEl = (<HTMLImageElement>this._currentImageEl.nativeElement);\n                                 this.imageLoad(imageEl);\n                            }\n                        });\n                    } else {\n                        this._value = '';\n                    }\n                    break;\n                default:\n                    this._value = value ? new ManagedFile(value, 0) : '';\n                    break;\n            }\n        } else {\n            let v = value || [];\n            console.warn('about to run v.map ! ', v);\n            this._value = v.map((item, i) => {\n                switch (this.type) {\n                    case 'image': return new ManagedImage(item, i);\n                    default: return new ManagedFile(item, i);\n                }\n            });\n        }\n        console.debug('ImageUpload#writeValue: ', { value: this._value });\n    }\n\n    registerOnChange(fn: any) {\n        this._onChangeCallback = fn;\n    }\n    registerOnTouched(fn: any) {\n        this._onTouchedCallback = fn;\n    }\n\n    /** internal */\n    private _stopEvent(e: Event) {\n        event.preventDefault();\n        event.stopPropagation();\n    }\n\n    /** internal */\n    private _getTransfer(event: any): any {\n        return event.dataTransfer ? event.dataTransfer : event.originalEvent.dataTransfer;\n    }\n\n    /** internal */\n    private _haveFiles(types: any): any {\n        if (!types) {\n            return false;\n        }\n\n        if (types.indexOf) {\n            return types.indexOf('Files') !== -1;\n        } else if (types.contains) {\n            return types.contains('Files');\n        } else {\n            return false;\n        }\n    }\n\n    gridImageLoaded(e: any) {\n        e._hasNew = false;\n\n        if (!e.config.hasOwnProperty('id')) {\n            this.isLoading = false;\n\n            e._hasNew = true;\n        } else {\n            let id = e.config.id;\n\n            if (++this._imagesLoaded === this.value.length) {\n                this.isLoading = false;\n            }\n        }\n\n        this.imageLoaded.emit(e);\n    }\n\n    handleClickedRemove(e: any) {\n        console.debug('ImageUpload.handleClickedRemove', {\n            e: e,\n            value: this.value\n        });\n\n        let value = this.value.slice(0);\n        value.splice(e.index, 1);\n        this.value = value;\n\n        this.imageRemoved.emit(e);\n    }\n\n\n    onDragOver(e: any) {\n        if (this._dragging) {\n            this._stopEvent(e);\n            return;\n        }\n\n        let transfer = this._getTransfer(e);\n        if (!this._haveFiles(transfer.types)) {\n            return;\n        }\n        transfer.dropEffect = 'copy';\n        this._stopEvent(e);\n        this.isDragOver = true;\n    }\n\n    onDragLeave(e: any) {\n        if (this._dragging) {\n            return;\n        }\n\n        this._stopEvent(e);\n        this.isDragOver = false;\n    }\n\n    fileDragStart(e: any): void {\n        console.log('ImageUploadComponent#fileDragStart', e);\n        this._dragging = true;\n    }\n\n    onDragEnd(e: any) {\n        console.debug('onDragEnd');\n        this._stopEvent(e);\n        this._dragging = false;\n    }\n\n    add(e: any) {\n        if (this._dragging) {\n            console.log('add cancelling because we are dragging image.');\n            this._dragging = false;\n            return;\n        } else {\n            console.log('add ', e);\n            let files = e.target.files || e.dataTransfer.files;\n\n            this._stopEvent(e);\n            this.fileAdded.emit(files);\n\n            this.isDragOver = false;\n            this.isLoading = true;\n\n            this.readFiles(files);\n        }\n        console.log('ImageUploadComponent#add', {\n            e: e,\n            this: this\n        });\n    }\n\n    readFiles(files) {\n        let count = this.value.slice(0).length;\n\n        for (let i = 0; i < files.length; i++) {\n            let file = files[i];\n\n            let image = new ImageUpload(file);\n            let reader = new FileReader();\n\n            this.isLoading = true;\n\n            reader.addEventListener('load', e => {\n                image.url = reader.result;\n                this.addImageToGrid(image);\n                this.isLoading = false;\n            });\n\n            setTimeout(() => { reader.readAsDataURL(file); });\n        }\n    }\n\n    addImageToGrid(image) {\n        console.log('Loaded new image: ', image);\n\n        let value = this.value.slice(0);\n        value.push(image);\n        this.value = value;\n\n        this.imageAdded.emit(image);\n    }\n    // private _dragData(image: JpFile, idx: number): JpFile {\n    //     let img = Object.assign({}, image);\n    //     img.idx = idx;\n    //     return img;\n    // }\n\n    reorder(event: { dragData: number, mouseEvent: DragEvent }, new_index: number): void {\n        let old_index = event.dragData;\n\n        this._stopEvent(event.mouseEvent);\n\n        console.info('ImageUploadComponent#reorder', {\n            old_index: old_index,\n            new_index: new_index,\n            event: event\n        });\n        this._dragging = false;\n\n        if (old_index !== new_index) {\n            this.moveImage(old_index, new_index);\n        }\n    }\n\n    moveImage(old_index, new_index): void {\n        let images = this.value;\n\n        const source = images[old_index];\n        const target = images[new_index];\n\n        images[new_index] = source;\n        images[old_index] = target;\n\n        this.value = images;\n\n        console.log('Just dropped image from drop zone ' + old_index + ' to drop zone ' + new_index);\n    };\n\n    /**\n     * Form reset\n     */\n    reset() {\n\n    }\n\n    /**\n     * Attach a single file\n     */\n    handleSingleFileAttach(e) {\n        console.log('handle single file attach ', e);\n        this._stopEvent(e);\n\n        let files = e.target.files || e.dataTransfer.files;\n        let file = files[0];\n\n        switch(this.type) {\n            case 'image':\n                this.attachSingleImage(file);\n                break;\n            case 'file':\n                this.attachSingleFile(file);\n                break;\n\n        }\n    }\n\n    attachSingleFile(file: File) {\n        console.log('Attach Single File: ', file);\n\n        let managedFile = new ManagedFile({_file: file}, 0);\n\n        console.log('attachSingleFile created new ManagedFile ', managedFile);\n\n        this.value = managedFile;\n        // let reader = new FileReader();\n\n        // this.isLoading = true;\n\n        // image.load().subscribe(e => {\n        //     image.url = e;\n\n        //     this.value = image;\n        //     setTimeout(() => {\n        //         let imageEl = (<HTMLImageElement>this._currentImageEl.nativeElement);\n        //         imageEl.src = e;\n\n        //         let val: ManagedImage = this.value;\n        //         val.width = imageEl.naturalWidth;\n        //         val.height = imageEl.naturalHeight;\n\n        //         this.value = val;\n        //         this.change.emit(this.value);\n\n        //         this.isLoading = false;\n        //     });\n        // })\n        // setTimeout(() => { reader.readAsDataURL(file); });\n    }\n\n    attachSingleImage(file: File) {\n        console.log('Attach Single Image: ', file);\n\n        let image = new ImageUpload(file);\n\n        console.log('attachSingleImage created new ImageUpload ', image);\n\n        let reader = new FileReader();\n\n        this.isLoading = true;\n\n        image.load().subscribe(e => {\n            image.url = e;\n\n            this.value = image;\n            setTimeout(() => {\n                let imageEl = (<HTMLImageElement>this._currentImageEl.nativeElement);\n                imageEl.src = e;\n\n                let val: ManagedImage = this.value;\n                val.width = imageEl.naturalWidth;\n                val.height = imageEl.naturalHeight;\n\n                this.value = val;\n                this.change.emit(this.value);\n\n                this.isLoading = false;\n            });\n        })\n        setTimeout(() => { reader.readAsDataURL(file); });\n    }\n\n\n    /**\n     * Remove single file\n     */\n    remove(e: any) {\n        this.value = '';\n    }\n\n    /**\n     * Replace single file\n     */\n    replace(e: any) {\n        console.log('ImageUploadComponent#replace ' + this.type + ' ', e);\n        this.handleSingleFileAttach(e);\n    }\n\n}\n"],"sourceRoot":"/source/"}