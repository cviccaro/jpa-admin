{"version":3,"sources":["shared/components/image-upload/image-upload.component.ts"],"names":[],"mappings":"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","file":"shared/components/image-upload/image-upload.component.js","sourcesContent":["import {\n    forwardRef,\n    Component,\n    AfterViewInit,\n    AfterContentInit,\n    SimpleChange,\n    OnChanges,\n    Input,\n    Output,\n    HostListener,\n    EventEmitter,\n    ViewChild,\n    ViewChildren,\n    ContentChildren,\n    Provider,\n    QueryList\n} from '@angular/core';\n\nimport { NgModel, ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { BooleanFieldValue } from '@angular2-material/core/annotations/field-value';\nimport { MD_GRID_LIST_DIRECTIVES, MdGridList } from '@angular2-material/grid-list';\n\nimport { MD_PROGRESS_BAR_DIRECTIVES } from '@angular2-material/progress-bar';\nimport { MD_ICON_DIRECTIVES } from '@angular2-material/icon';\nimport { Observable } from 'rxjs/Rx';\n\nimport { GridImage } from './grid-image/grid-image';\nimport { ImageItem } from './uploader/index';\nimport { DragDropAbstractComponent, ImageUploadDropZones, Droppable, Draggable, DragDropService} from '../dragdrop/index';\n\nimport { AuthService } from '../../services/auth.service';\n\nconst noop = () => { };\nlet nextUniqueId = 0;\n\nexport const IMAGE_UPLOAD_VALUE_ACCESSOR = new Provider(NG_VALUE_ACCESSOR, {\n    useExisting: forwardRef(() => ImageUploadComponent),\n    multi: true\n});\n\n@Component({\n    moduleId: module.id,\n    selector: 'jpa-image-upload',\n    templateUrl: './image-upload.component.html',\n    styleUrls: ['./image-upload.component.css'],\n    directives: [\n        MD_GRID_LIST_DIRECTIVES,\n        MD_PROGRESS_BAR_DIRECTIVES,\n        MD_ICON_DIRECTIVES,\n        NgModel,\n        GridImage,\n        Draggable,\n        Droppable,\n        ImageUploadDropZones\n    ],\n    providers: [IMAGE_UPLOAD_VALUE_ACCESSOR, DragDropService]\n})\nexport class ImageUploadComponent implements AfterViewInit, OnChanges, ControlValueAccessor {\n    public isDragOver: boolean = false;\n    public isLoading: boolean = false;\n\n    private _count: number = 0;\n    private _empty: boolean = false;\n    private _added: number = 0;\n    private _imagesLoaded:number = 0;\n    private _value: File[] = [];\n\n    private _nextWeight = 0;\n\n    private _onTouchedCallback: () => void = noop;\n    private _onChangeCallback: (_: any) => void = noop;\n\n    //public uploader: FileUploader;\n\n    constructor(\n    //    uploader: FileUploader,\n        authService: AuthService\n    ) {\n        // this.uploader = uploader;\n        // this.uploader.setAuthToken(authService.getToken());\n    }\n\n    /**\n     * Content directives\n     */\n    @ViewChildren(GridImage) private _gridImages: QueryList<GridImage>;\n    @ViewChild(MdGridList) private _gridList: MdGridList;\n\n    /**\n     * Inputs\n     */\n    @Input() url: string;\n    @Input() @BooleanFieldValue() multiple: boolean = false;\n    @Input() images: any[] = [];\n\n    // MdGridList\n    @Input() gutterSize: string = \"8px\";\n    @Input() cols: number = 4;\n    @Input() rowHeight: any = '16:9';\n\n    // form-related\n    @Input() name: string = null;\n    @Input() @BooleanFieldValue() required: boolean = false;\n    @Input() id: string = `jpa-panel-${nextUniqueId++}`;\n    @Input() step: number = null;\n    @Input() tabIndex: number = null;\n\n    /**\n     * Outputs\n     */\n    @Output() fileAdded: EventEmitter<File[]> = new EventEmitter<File[]>();\n    @Output() imageLoaded = new EventEmitter();\n    @Output() imageAdded = new EventEmitter();\n    @Output() imageRemoved = new EventEmitter();\n    @Output() change = new EventEmitter();\n\n    /** element  outputs **/\n    private _blurEmitter: EventEmitter<FocusEvent> = new EventEmitter<FocusEvent>();\n    private _focusEmitter: EventEmitter<FocusEvent> = new EventEmitter<FocusEvent>();\n\n    @Output('blur')\n    get onBlur(): Observable<FocusEvent> {\n        return this._blurEmitter.asObservable();\n    }\n\n    @Output('focus')\n    get onFocus(): Observable<FocusEvent> {\n        return this._focusEmitter.asObservable();\n    }\n\n    /** @internal */\n    handleFocus(event: FocusEvent) {\n        console.log('ImageUploadComponent#handleFocus', event);\n    }\n\n    /** @internal */\n    handleBlur(event: FocusEvent) {\n        console.log('ImageUploadComponent#handleBlur', event);\n    }\n\n    /**\n     * Lifecycle\n     */\n\n    ngOnInit() {\n        if (this.images === undefined) {\n            this.images = [];\n        }\n\n        // this.uploader.setUrl(this.url);\n        this.isLoading = this._empty = !!this.images.length;\n        this._count = this.images.length;\n\n        this.images.forEach(image => {\n            if (image.weight >= this._nextWeight) {\n                this._nextWeight = image.weight + 5;\n            }\n        });\n\n        //console.log('ImageUploadComponent.OnInit', this);\n    }\n\n    ngAfterViewInit() {\n        if (this._gridImages) {\n           // console.log('got grid images: ', this._gridImages);\n            this._gridImages.changes.subscribe( (changes: QueryList<GridImage>) => {\n                console.log('Changes to grid images: ', changes);\n            });\n        }\n\n        if (this._gridList) {\n            this._gridList['_tiles'].forEach((tile, i) => { this.registerTileDrag(this, tile, i)  });\n        }\n\n        console.info('ImageUploadComponent#AfterViewInit ---', this);\n    }\n\n    ngOnChanges(changes: { [key: string]: SimpleChange }) {\n        console.debug('ImageUploadComponent#OnChanges ---', changes);\n    }\n\n\n    registerTileDrag(thisArg, tile, i) {\n        console.log('MdGridtile register Tile drag on tile ' + i + ' ', tile);\n\n        tile.dragging = false;\n        let cols = thisArg['cols']-1;\n\n        let el = (<HTMLElement>tile['_element']['nativeElement']);\n        el.addEventListener('mousedown', e => {\n            tile.dragging = true;\n            tile.cursor_default = el.style.cursor;\n            tile.start = {\n                mouse: {x: e.clientX, y: e.clientY},\n                size: {w: el.clientWidth, h: el.clientHeight},\n                zIndex: el.style.zIndex\n            };\n            el.style.cursor = 'move';\n            el.style.zIndex = '9999';\n            console.log('Grid Tile on mouse down ', e);\n        });\n        el.addEventListener('mouseup', e => {\n            tile.dragging = false;\n            el.style.transform = '';\n            el.style.cursor = tile.cursor_default;\n            console.log('Grid Tile on mouse up ', e);\n        });\n        el.addEventListener('mousemove', e => {\n            if (tile.dragging) {\n                \n                let posX = e.clientX;\n                let posY = e.clientY;\n\n                let diffX = tile.start.mouse.x - e.clientX;\n                let diffY = tile.start.mouse.y - e.clientY;\n\n                let thresholdX = tile.start.size.w * 0.9;\n                let thresholdY = tile.start.size.h * 0.9;\n\n                if (Math.abs(diffX) > thresholdX) {\n                    let direction = diffX > 0 ? 'left' : 'right';\n                    console.log({\n                        i: i,\n                        'cols-1': cols\n                    })\n                    if (direction === 'right' && (i % cols === 0)) {\n                        console.log('ignoring right-hand swap because we are on the last column');\n                    } else if (direction === 'left' && (i % cols === 0)) {\n                        console.log('ignoring right-hand swap because we are on the first column');\n                    } else {\n                        // tile.dragging = false;\n                        // el.dispatchEvent(new Event('mouseup'));\n                        // el.style.transform = 'translate3d(0,0,0)';\n                        // console.log('TRANFORM: ', el.style.transform);\n                        // el.style.cursor = tile.cursor_default;\n                        // el.style.zIndex = tile.start.zIndex;\n                        console.log('passed horizontal threshold', {diff: {x: diffX, y: diffY}, threshold: {x: thresholdX, y: thresholdY}, direction: direction})\n\n                        let nextIndex = direction === 'right' ? i + 1 : i - 1;\n                        let nextWeight = thisArg['images'][nextIndex]['weight'];\n                        let oldWeight = thisArg['images'][i]['weight'];\n\n                        thisArg['images'][i]['weight'] = nextWeight;\n                        thisArg['images'][nextIndex]['weight'] = oldWeight;\n\n                        setTimeout(() => { thisArg['sortImages']() },0);\n                    }\n                }\n                if (Math.abs(diffY) > thresholdY) {\n                    console.log('Passed vertical threshold ', {diffX: diffY, threshold: thresholdY});\n                }\n\n                console.log('tile ' + i + ' moved ', {\n                    diffX: diffX,\n                    diffY: diffY,\n                    el: el,\n                    threshold: {\n                        w: thresholdX,\n                        h: thresholdY\n                    }\n                });\n\n                el.style.transform = `translate3d(${-diffX}px, ${-diffY}px, 0)`;\n\n            }\n        });\n    }\n\n    sortImages() {\n        console.log('sorting images', this.images);\n        this.images.sort((a:any,b: any) => {\n            return a.weight > b.weight ? 1 : 0;\n        });\n        this._gridList['_tiles'].forEach((tile, i) => {\n            let el = (<HTMLElement>tile['_element']['nativeElement']);\n            el.style.transform = 'translate3d(0,0,0)';\n        });\n        console.log('sorted images', this.images);\n    }\n    weightChanged(e) {\n        console.warn('weight cahnged', e);\n    }\n\n    /**\n     * Grid interaction events\n     */\n    onDragOver(e: any) {\n        let transfer = this._getTransfer(e);\n        if (!this._haveFiles(transfer.types)) {\n            return;\n        }\n        transfer.dropEffect = 'copy';\n        this._stopEvent(e);\n        this.isDragOver = true;\n    }\n\n    onDragLeave(e: any) {\n        this._stopEvent(e);\n        this.isDragOver = false;\n    }\n\n    onFileDrop(e: any) {\n        let files = e.target.files || e.dataTransfer.files;\n        this._stopEvent(e);\n        this.isDragOver = false;\n        this.fileAdded.emit(files);\n        this.isLoading = true;\n\n        let count = this.value.length;\n\n        for (let i = 0; i < files.length; i++) {\n            let file = files[i];\n\n            let value = this.value;\n            value.push(file);\n\n            this.value = value;\n\n            let image = new ImageItem(file);\n\n            //this.uploader.addToQueue([image]);\n\n            let reader = new FileReader();\n            let k = i;\n\n            this.isLoading = true;\n            reader.addEventListener('load', e => {\n                file._weight = this._nextWeight;\n                this._nextWeight = this._nextWeight + 5;\n                let newImage = {\n                    id: 'upload_' + i,\n                    name: file.name,\n                    image_url: reader.result,\n                    isNew: true,\n                    _file: file,\n                    weight: file._weight\n                };\n                this.addImageToGrid(newImage);\n            });\n\n            setTimeout(() => { reader.readAsDataURL(file); });\n        }\n\n        console.log('ImageUploadComponent#FileDrop', {\n            e: e,\n            this: this\n        });\n    }\n\n    public addImageToGrid(image) {\n        console.log('Loaded new image: ', image);\n\n        this.images.push(image);\n\n        this.imageAdded.emit(image);\n    }\n\n    /**\n     * NgControl value\n     */\n\n     get value(): any { return this._value; };\n     @Input() set value(v: any) {\n         console.debug('ImageUploadComponent# set value(): ', {\n             v: v,\n             _value: this._value\n         });\n         if (v.length !== this._added) {\n             this._added++;\n             this._value = v;\n             console.warn('emitting change', v);\n             this.change.emit(v);\n             this._onChangeCallback(v);\n         }\n     }\n\n    /**\n     * ControlValueAccessor implementation\n     */\n    writeValue(value: any) {\n        this._value = value || [];\n        console.debug('ImageUpload#writeValue: ', {value: this._value});\n    }\n    registerOnChange(fn: any) {\n        this._onChangeCallback = fn;\n    }\n    registerOnTouched(fn: any) {\n        this._onTouchedCallback = fn;\n    }\n\n    /** internal */\n    private _stopEvent(e: Event) {\n        event.preventDefault();\n        event.stopPropagation();\n    }\n\n    /** internal */\n    private _getTransfer(event: any): any {\n        return event.dataTransfer ? event.dataTransfer : event.originalEvent.dataTransfer;\n    }\n\n    /** internal */\n    private _haveFiles(types: any): any {\n        if (!types) {\n            return false;\n        }\n\n        if (types.indexOf) {\n            return types.indexOf('Files') !== -1;\n        } else if (types.contains) {\n            return types.contains('Files');\n        } else {\n            return false;\n        }\n    }\n\n    handleImageLoaded(e: any) {\n        e._hasNew = false;\n\n        if (e.config.isNew) {\n            console.debug('ImageUpload.handleImageLoaded NEW', {\n                e: e,\n                value: this.value\n            });\n            this.isLoading = false;\n\n            e._hasNew = true;\n        } else {\n            let id = e.config.id;\n\n            if (++this._imagesLoaded === this.images.length) {\n                this.isLoading = false;\n            }\n        }\n\n        this.imageLoaded.emit(e);\n    }\n\n    handleClickedRemove(e: any) {\n        console.debug('ImageUpload.handleClickedRemove', {\n            e: e,\n            value: this.value\n        });\n        this.images.splice(e.index, 1);\n\n        if (this.value && this.value.length) {\n            console.log('Searching through value to remove', this.value);\n            let idx = this.value.indexOf(e.config._file);\n            console.log('indexOf result', {idx: idx});\n            if (idx !== -1) {\n                this.value = this._value.splice(idx, 1);\n            }\n        }\n        this.imageRemoved.emit(e);\n    }\n\n    // handleFileRemove(e: any) {\n    //     console.debug('ImageUpload.handleFileRemove', {\n    //         e: e,\n    //         value: this.value\n    //     });\n    // }\n}\n"],"sourceRoot":"/source/"}