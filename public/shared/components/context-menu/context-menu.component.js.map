{"version":3,"sources":["shared/components/context-menu/context-menu.component.ts"],"names":[],"mappings":"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","file":"shared/components/context-menu/context-menu.component.js","sourcesContent":["import { Component, AfterViewInit, OnDestroy, Input, HostBinding, ComponentRef, ElementRef } from '@angular/core';\n\nimport { MATERIAL_DIRECTIVES } from '../../libs/angular2-material';\n\nimport { ContextMenuItem } from './menu-item';\nimport { ContextMenuFocusTrap } from './focus-trap';\nimport { JpaContextMenu } from './context-menu';\n\nimport { Subscription } from 'rxjs/Rx';\n\n@Component({\n\tmoduleId: module.id,\n\tselector: 'jpa-context-menu',\n\ttemplateUrl: './context-menu.component.html',\n\tstyleUrls: ['./context-menu.component.css'],\n\tdirectives: [ MATERIAL_DIRECTIVES, ContextMenuItem, ContextMenuFocusTrap ]\n})\nexport class ContextMenuComponent implements AfterViewInit, OnDestroy {\n\tpublic opened = false;\n\tpublic element: ElementRef;\n\n\tprivate _topPos = '0px';\n\tprivate _leftPos = '0px';\n\n\tprivate backdrop: ComponentRef<ContextMenuFocusTrap>;\n\tprivate backdropSubscription: Subscription;\n\tprivate closeSubscriber: Subscription;\n\n\t@Input() showOnHover: boolean = false;\n\n\t@HostBinding('style.top') get topPos() { return this._topPos; }\n\t@HostBinding('style.left') get leftPos() { return this._leftPos; }\n\t@HostBinding('attr.hidden') get hiddenAttr() { return this.opened ? null : true; }\n\t@HostBinding('class.hidden') get hiddenClass() { return this.opened ? false : true; }\n\n\tconstructor(private service: JpaContextMenu, element: ElementRef) {\n\t\tthis.element = element;\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.registerSubscribers();\n\t}\n\n\tregisterSubscribers() {\n\t\tthis.closeSubscriber = this.service.onClose.subscribe(e => {\n\t\t\tif (this.backdrop) this.backdrop.destroy();\n\t\t\tthis.opened = false;\n\t\t\tthis.element.nativeElement.remove();\n\t\t});\n\t}\n\n\topen(e: any) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tif (this.opened) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.backdropSubscription = this.service.resolveBackdrop(this).subscribe((cmpRef: ComponentRef<ContextMenuFocusTrap>) => {\n\t\t\tthis.backdrop = cmpRef;\n\t\t});\n\n\t\tthis._topPos = (e.clientY+10) + 'px';\n\t\tthis._leftPos = (e.clientX+10) + 'px';\n\t\tthis.opened = true;\n\t}\n\n\tngOnDestroy() {\n\t\tif (this.closeSubscriber) this.closeSubscriber.unsubscribe();\n\t\tif (this.backdropSubscription) this.backdropSubscription.unsubscribe();\n\t\tif (this.backdrop) this.backdrop.destroy();\n\t}\n}\n"],"sourceRoot":"/source/"}