{"version":3,"sources":["shared/components/context-menu/context-menu.component.ts"],"names":[],"mappings":"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","file":"shared/components/context-menu/context-menu.component.js","sourcesContent":["import { Component, AfterViewInit, OnDestroy, Input, HostBinding, ComponentRef, ElementRef } from '@angular/core';\r\n\r\nimport { MATERIAL_DIRECTIVES } from '../../libs/angular2-material';\r\n\r\nimport { ContextMenuItem } from './menu-item';\r\nimport { ContextMenuFocusTrap } from './focus-trap';\r\nimport { JpaContextMenu } from './context-menu';\r\n\r\nimport { Subscription } from 'rxjs/Rx';\r\n\r\n@Component({\r\n\tmoduleId: module.id,\r\n\tselector: 'jpa-context-menu',\r\n\ttemplateUrl: './context-menu.component.html',\r\n\tstyleUrls: ['./context-menu.component.css'],\r\n\tdirectives: [ MATERIAL_DIRECTIVES, ContextMenuItem, ContextMenuFocusTrap ]\r\n})\r\nexport class ContextMenuComponent implements AfterViewInit, OnDestroy {\r\n\tpublic opened = false;\r\n\tpublic element: ElementRef;\r\n\r\n\tprivate _topPos = '0px';\r\n\tprivate _leftPos = '0px';\r\n\r\n\tprivate backdrop: ComponentRef<ContextMenuFocusTrap>;\r\n\tprivate backdropSubscription: Subscription;\r\n\tprivate closeSubscriber: Subscription;\r\n\r\n\t@Input() showOnHover: boolean = false;\r\n\r\n\t@HostBinding('style.top') get topPos() { return this._topPos; }\r\n\t@HostBinding('style.left') get leftPos() { return this._leftPos; }\r\n\t@HostBinding('attr.hidden') get hiddenAttr() { return this.opened ? null : true; }\r\n\r\n\tconstructor(private service: JpaContextMenu, element: ElementRef) {\r\n\t\tthis.element = element;\r\n\t}\r\n\r\n\tngAfterViewInit() {\r\n\t\tthis.registerSubscribers();\r\n\t}\r\n\r\n\tregisterSubscribers() {\r\n\t\tthis.closeSubscriber = this.service.onClose.subscribe(e => {\r\n\t\t\tthis.opened = false;\r\n\t\t\tif (this.backdrop) this.backdrop.destroy();\r\n\t\t});\r\n\t}\r\n\r\n\topen(e: any) {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\r\n\t\tif (this.opened) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.backdropSubscription = this.service.resolveBackdrop(this).subscribe((cmpRef: ComponentRef<ContextMenuFocusTrap>) => {\r\n\t\t\tthis.backdrop = cmpRef;\r\n\t\t});\r\n\r\n\t\tthis._topPos = (e.clientY+10) + 'px';\r\n\t\tthis._leftPos = (e.clientX+10) + 'px';\r\n\t\tthis.opened = true;\r\n\t}\r\n\r\n\tngOnDestroy() {\r\n\t\tif (this.closeSubscriber) this.closeSubscriber.unsubscribe();\r\n\t\tif (this.backdropSubscription) this.backdropSubscription.unsubscribe();\r\n\t\tif (this.backdrop) this.backdrop.destroy();\r\n\t}\r\n}\r\n"],"sourceRoot":"/source/"}