{"version":3,"sources":["shared/components/panel/summary/panel-summary.component.ts"],"names":[],"mappings":"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","file":"shared/components/panel/summary/panel-summary.component.js","sourcesContent":["import {\n    Component,\n    AfterViewInit,\n    Input,\n    ViewChild,\n    ElementRef,\n    OnChanges,\n    SimpleChanges,\n    SimpleChange,\n    QueryList\n} from '@angular/core';\nimport { NgSwitch, NgSwitchCase, NgSwitchDefault } from '@angular/common';\nimport { NgSelectOption } from '@angular/forms';\n\nimport { MATERIAL_DIRECTIVES } from '../../../../shared/libs/angular2-material';\n\nimport { PanelSummaryImage } from '../summary-image/summary-image.component';\n\n@Component({\n    moduleId: module.id,\n    selector: 'jpa-panel-summary',\n    templateUrl: './panel-summary.component.html',\n    styleUrls: ['./panel-summary.component.css'],\n    directives: [MATERIAL_DIRECTIVES, PanelSummaryImage],\n    viewProviders: [NgSwitch, NgSwitchCase, NgSwitchDefault]\n})\nexport class PanelSummaryComponent implements AfterViewInit, OnChanges {\n    private imageLoaded = false;\n    private _currentImageSize = null;\n    private _currentImageName = false;\n    private _summary: string = '';\n    private _selectOptions: any[];\n\n    @Input() expanded: boolean = false;\n    @Input() empty: boolean = true;\n    @Input() type: string;\n    @Input() gallery: any;\n    @Input() value: any;\n    @Input() currentImage: any;\n    @Input() valueChanged: boolean = false;\n    @Input() editText: string;\n\n    @ViewChild('imagePreview') _imagePreview: ElementRef;\n\n    set currentImageSize(v: { w: number, h: number }) {\n        this._currentImageSize = v;\n    }\n    get currentImageSize() {\n        return this._currentImageSize;\n    }\n\n    ngAfterViewInit() {\n        this.summary = this.value;\n    }\n\n    report(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        console.log(this);\n    }\n\n    setOptions(options: QueryList<NgSelectOption>) {\n        if (options.length) {\n        \tthis._selectOptions = options.map(item => {\n        \t\treturn {\n        \t\t\tvalue: item['_element']['nativeElement']['value'],\n        \t\t\tlabel: (<HTMLOptionElement>item['_element']['nativeElement']).innerHTML\n        \t\t};\n        \t})\n        }\n    }\n\n    get summary(): any {\n        return this._summary;\n    }\n\n    set summary(v: any) {\n        this._summary = v;\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        //console.log('PanelSummary changed something: ', changes);\n        for (let prop in changes) {\n            let previousValue = changes[prop].previousValue;\n            let currentValue = changes[prop].currentValue;\n            let isFirstChange = changes[prop].isFirstChange;\n            console.log('PanelSummary.'+prop + ' changed: ', {from: previousValue, to: currentValue, isFirstChange: isFirstChange});\n\n            switch (prop) {\n                case 'value':\n                    this.setSummaryOf(currentValue);\n                    break;\n            }\n        }\n    }\n\n    setSummaryOf(value: any) {\n    \tswitch(this.type) {\n    \t\tcase 'select':\n                let filtered = this._selectOptions.filter(opt => {\n                    return opt['value'] == value;\n                });\n                if (filtered.length) {\n                    this.summary = filtered[0]['label'];\n                }\n    \t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.summary = value;\n\t\t}\n    }\n\n    // set summary(value: any) {\n    //     switch(this.type) {\n    //         case 'select':\n    //             let interval = setInterval(() => {\n    //                 let filtered = this._optionChildren.filter(opt => {\n    //                     return opt['_element']['nativeElement']['value'] == this._value;\n    //                 });\n    //                 if (filtered.length) {\n    //                     this._summary = filtered[0]['_element']['nativeElement']['innerHTML'];\n    //                     clearInterval(interval);\n    //                 }\n    //             }, 250);\n    //             break;\n    //         case 'image':\n    //             this._summary = value || '';\n    //             break;\n    //         case 'images':\n    //             this._setGallerySummary();\n    //             break;\n    //         default:\n    //             this._summary = value;\n    //     }\n    //     // console.debug('JpaPanel.'+this.type+' ' + this.name + '#set summary(): ', this._summary);\n    // }\n\n    // private _setGallerySummary() {\n    //     if (this.gallery.length) {\n    //         this._summary = this.gallery.length + ' pictures in gallery';\n    //     } else {\n    //         this._summary = '';\n    //     }\n    // }\n}\n"],"sourceRoot":"/source/"}