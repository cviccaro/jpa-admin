{"version":3,"sources":["shared/components/panel/summary/panel-summary.component.ts"],"names":[],"mappings":"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","file":"shared/components/panel/summary/panel-summary.component.js","sourcesContent":["import {\r\n    Component,\r\n    AfterViewInit,\r\n    Input,\r\n    ViewChild,\r\n    ElementRef,\r\n    OnChanges,\r\n    SimpleChanges,\r\n    SimpleChange,\r\n    QueryList\r\n} from '@angular/core';\r\nimport { NgSwitch, NgSwitchCase, NgSwitchDefault } from '@angular/common';\r\nimport { NgSelectOption } from '@angular/forms';\r\n\r\nimport { MATERIAL_DIRECTIVES } from '../../../../shared/libs/angular2-material';\r\n\r\nimport { PanelSummaryImage } from '../summary-image/summary-image.component';\r\n\r\n@Component({\r\n    moduleId: module.id,\r\n    selector: 'jpa-panel-summary',\r\n    templateUrl: './panel-summary.component.html',\r\n    styleUrls: ['./panel-summary.component.css'],\r\n    directives: [MATERIAL_DIRECTIVES, PanelSummaryImage],\r\n    viewProviders: [NgSwitch, NgSwitchCase, NgSwitchDefault]\r\n})\r\nexport class PanelSummaryComponent implements AfterViewInit, OnChanges {\r\n    private imageLoaded = false;\r\n    private _currentImageSize = null;\r\n    private _currentImageName = false;\r\n    private _summary: string = '';\r\n    private _selectOptions: any[];\r\n\r\n    @Input() expanded: boolean = false;\r\n    @Input() empty: boolean = true;\r\n    @Input() type: string;\r\n    @Input() gallery: any;\r\n    @Input() value: any;\r\n    @Input() currentImage: any;\r\n    @Input() valueChanged: boolean = false;\r\n    @Input() editText: string;\r\n\r\n    @ViewChild('imagePreview') _imagePreview: ElementRef;\r\n\r\n    set currentImageSize(v: { w: number, h: number }) {\r\n        this._currentImageSize = v;\r\n    }\r\n    get currentImageSize() {\r\n        return this._currentImageSize;\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.summary = this.value;\r\n    }\r\n\r\n    report(e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        console.log(this);\r\n    }\r\n\r\n    setOptions(options: QueryList<NgSelectOption>) {\r\n        if (options.length) {\r\n        \tthis._selectOptions = options.map(item => {\r\n        \t\treturn {\r\n        \t\t\tvalue: item['_element']['nativeElement']['value'],\r\n        \t\t\tlabel: (<HTMLOptionElement>item['_element']['nativeElement']).innerHTML\r\n        \t\t};\r\n        \t})\r\n        }\r\n    }\r\n\r\n    get summary(): any {\r\n        return this._summary;\r\n    }\r\n\r\n    set summary(v: any) {\r\n        this._summary = v;\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        //console.log('PanelSummary changed something: ', changes);\r\n        for (let prop in changes) {\r\n            let previousValue = changes[prop].previousValue;\r\n            let currentValue = changes[prop].currentValue;\r\n            let isFirstChange = changes[prop].isFirstChange;\r\n            console.log('PanelSummary.'+prop + ' changed: ', {from: previousValue, to: currentValue, isFirstChange: isFirstChange});\r\n\r\n            switch (prop) {\r\n                case 'value':\r\n                    this.setSummaryOf(currentValue);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    setSummaryOf(value: any) {\r\n    \tswitch(this.type) {\r\n    \t\tcase 'select':\r\n                let filtered = this._selectOptions.filter(opt => {\r\n                    return opt['value'] == value;\r\n                });\r\n                if (filtered.length) {\r\n                    this.summary = filtered[0]['label'];\r\n                }\r\n    \t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthis.summary = value;\r\n\t\t}\r\n    }\r\n\r\n    // set summary(value: any) {\r\n    //     switch(this.type) {\r\n    //         case 'select':\r\n    //             let interval = setInterval(() => {\r\n    //                 let filtered = this._optionChildren.filter(opt => {\r\n    //                     return opt['_element']['nativeElement']['value'] == this._value;\r\n    //                 });\r\n    //                 if (filtered.length) {\r\n    //                     this._summary = filtered[0]['_element']['nativeElement']['innerHTML'];\r\n    //                     clearInterval(interval);\r\n    //                 }\r\n    //             }, 250);\r\n    //             break;\r\n    //         case 'image':\r\n    //             this._summary = value || '';\r\n    //             break;\r\n    //         case 'images':\r\n    //             this._setGallerySummary();\r\n    //             break;\r\n    //         default:\r\n    //             this._summary = value;\r\n    //     }\r\n    //     // console.debug('JpaPanel.'+this.type+' ' + this.name + '#set summary(): ', this._summary);\r\n    // }\r\n\r\n    // private _setGallerySummary() {\r\n    //     if (this.gallery.length) {\r\n    //         this._summary = this.gallery.length + ' pictures in gallery';\r\n    //     } else {\r\n    //         this._summary = '';\r\n    //     }\r\n    // }\r\n}\r\n"],"sourceRoot":"/source/"}