{"version":3,"sources":["@login/login.component.ts"],"names":[],"mappings":"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","file":"@login/login.component.js","sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { NgForm } from '@angular/forms';\nimport { Subscription } from 'rxjs/Subscription';\nimport { ToasterService } from 'angular2-toaster';\nimport { MATERIAL_DIRECTIVES, MATERIAL_PROVIDERS } from '../shared/libs/angular2-material';\nimport { AuthService, LoggerService } from '../shared/index';\n\n@Component({\n    moduleId: module.id,\n    selector: 'jpa-login',\n    templateUrl: './login.component.html',\n    styleUrls: ['./login.component.css'],\n    directives: [MATERIAL_DIRECTIVES],\n    providers: [ NgForm]\n})\nexport class LoginComponent implements OnInit, OnDestroy {\n    subs: Subscription[];\n\n    email: string;\n    password: string;\n    submitted = false;\n    working = false;\n\n    constructor(private router: Router, private service: AuthService, private toaster: ToasterService, private log: LoggerService) { }\n\n    ngOnInit() {\n        this.log.log('LoginComponent initialized.', this);\n        let sub = this.service.whenAuthorized.subscribe(authorized => this.router.navigate(['']));\n\n        this.subs.push(sub);\n    }\n\n    onSubmit() {\n        this.working = true;\n        this.submitted = true;\n\n        let sub = this.service.login(this.email, this.password)\n            .subscribe(res => this.success(res), error => this.fail(error));\n\n        this.subs.push(sub);\n    }\n\n    success(res) {\n        this.log.log('Authservice returned successfully: ', res);\n\n        this.working = false;\n        this.toaster.pop('success', 'Success!', 'Logging you in now.');\n\n        setTimeout(() => this.router.navigate(['']), 500);\n    }\n\n    fail(error) {\n        this.working = false;\n        this.toaster.pop('error', error.title, error.message);\n    }\n\n    ngOnDestroy() {\n        this.subs.forEach(sub => {\n            if (sub) sub.unsubscribe(); \n        })\n    }\n}\n"],"sourceRoot":"/source/"}